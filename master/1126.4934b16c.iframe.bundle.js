(self.webpackChunk_jetbrains_ring_ui=self.webpackChunk_jetbrains_ring_ui||[]).push([[1126],{"./.storybook/angular-decorator.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{i:function(){return APP_NAME}});var angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/angular/index.js"),angular__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__),_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@storybook/preview-api");const APP_NAME="ring-ui.story.app",angularDecorator=story=>{const node=document.createElement("div");node.innerHTML=story();const app=angular__WEBPACK_IMPORTED_MODULE_0___default().bootstrap(node,[APP_NAME],{strictDi:!0});return(0,_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>()=>{app.get("$rootScope").$destroy(),node.innerHTML=""})),node};__webpack_exports__.Z=()=>angularDecorator},"./src/permissions-ng/permissions-ng.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return permissions_ng_permissions_ng}});var angular=__webpack_require__("./node_modules/angular/index.js"),angular_default=__webpack_require__.n(angular);class PermissionCache{static GLOBAL_PROJECT_ID="global";static _toProjectIdSet(projects){let projectIdSet=null;if(projects){projectIdSet={};for(let i=0;i<projects.length;i++)projectIdSet[projects[i].id]=!0}return projectIdSet}namesConverter;constructor(permissions,namesConverter){this.namesConverter=namesConverter||(key=>key),this.set(permissions)}_permissions;permissionCache;set(permissions){const permissionCache=(permissions||[]).reduce(((_permissionCache,permission)=>{const key=this.namesConverter(permission.permission.key);return key&&(_permissionCache[key]={global:permission.global,projectIdSet:this.constructor._toProjectIdSet(permission.projects)}),_permissionCache}),{});return this._permissions=permissions,this.permissionCache=permissionCache,this}get(){return this._permissions}has(permissions,projectId){const lexems=this.lex(permissions);if(0===lexems.length)return!0;try{return this.or(lexems,projectId)}catch(e){return!1}}lex(query){const lexems=[];if(query){let currentIdentifier="";for(let i=0;i<query.length;i++)switch(query.charAt(i)){case" ":case"\t":case"\n":case"\r":currentIdentifier&&(lexems.push(currentIdentifier),currentIdentifier="");break;case"(":case")":case"&":case"|":case"!":currentIdentifier&&(lexems.push(currentIdentifier),currentIdentifier=""),lexems.push(query.charAt(i));break;default:currentIdentifier+=query.charAt(i)}currentIdentifier&&lexems.push(currentIdentifier)}return lexems}or(lexems,projectId){let result=this.and(lexems,projectId);for(;lexems.length>0&&")"!==lexems[0];){if("|"!==lexems.shift())throw new Error("Operator '|' was expected");result=this.and(lexems,projectId)||result}return result}and(lexems,projectId){let result=this.not(lexems,projectId);for(;lexems.length>0&&")"!==lexems[0]&&"|"!==lexems[0];)"&"===lexems[0]&&lexems.shift(),result=this.not(lexems,projectId)&&result;return result}not(lexems,projectId){let notCounter=0;for(;lexems.length>0&&"!"===lexems[0];)++notCounter,lexems.shift();const result=this.term(lexems,projectId);return notCounter%2==0?result:!result}term(lexems,projectId){if(0===lexems.length)throw new Error("Operand was expected");const t=lexems.shift();let result;if("("===t){if(result=this.or(lexems,projectId),")"!==lexems.shift())throw new Error("Operator ')' was expected")}else result=null!=t&&this.testPermission(t,projectId);return result}testPermission(permissionName,projectId){const permissionCache=this.permissionCache,convertedName=this.namesConverter(permissionName),cachedPermission=permissionCache?.[permissionName]||convertedName&&permissionCache?.[convertedName];return!!cachedPermission&&(!!cachedPermission.global||(!projectId||null!=cachedPermission.projectIdSet&&projectId in cachedPermission.projectIdSet))}}class Permissions{static API_PERMISSION_CACHE_PATH="permissions/cache";query;namesConverter;_auth;_datasource;_promise;_subscribed;_permissionCache;constructor(auth){let config=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.query=Permissions.getPermissionQuery(config.services),this.namesConverter=config.prefix?Permissions.getDefaultNamesConverter(config.prefix):config.namesConverter,!auth)throw new Error("Parameter auth is required");this._auth=auth,this._datasource=config.datasource||this._defaultDatasource,this._promise=null,this._subscribed=!1,this._permissionCache=new PermissionCache(null,this.namesConverter)}_defaultDatasource=query=>this._auth.http.get(Permissions.API_PERMISSION_CACHE_PATH,{query:{fields:"permission/key,global,projects(id)",query:query}});static getDefaultNamesConverter(prefix){return storedName=>0!==storedName.indexOf(prefix)?storedName:storedName.substr(prefix.length)}static getPermissionQuery(services){if(services&&services.length)return services.map((service=>`service:{${service}}`)).join(" or ")}set(cachedPermissions){return this._permissionCache.set(cachedPermissions),this._setCache(Promise.resolve(this._permissionCache)),this._permissionCache}get(){return this._permissionCache.get()}_setCache(value){this._promise=value}_getCache(){return this._promise}_resetCache(){this._setCache(null)}load(options){!1===this._subscribed&&(this._auth.addListener("userChange",(()=>{this.reload()})),this._subscribed=!0);const cache=this._getCache();if(!hasCacheControl("NO_CACHE",options)&&cache)return cache;if(hasCacheControl("NO_STORE",options))return this._loadPermissions().then((cachedPermissions=>new PermissionCache(cachedPermissions,this.namesConverter)));const permissions=this._loadPermissions().then((cachedPermissions=>this.set(cachedPermissions)));return this._setCache(permissions),permissions;function hasCacheControl(value,_options){return!(!_options||!_options.cacheControl)&&_options.cacheControl[value]}}_loadPermissions(){return this._datasource(this.query)}reload(){return this._resetCache(),this.load()}check(permissions,projectId){return this.load().then((permissionCache=>permissionCache.has(permissions,projectId)))}bindVariable(object,propertyName,permissions,projectId){return object[propertyName]=!1,this.check(permissions,projectId).then((permitted=>(object[propertyName]=permitted,permitted)))}}__webpack_require__("./src/permissions-ng/permissions-ng.css");function registerPermission(element){const somePermissionsCtrl=element.controller("rgSomePermissions");return somePermissionsCtrl&&somePermissionsCtrl.registerPermission()||angular_default().noop}const angularModule=angular_default().module("Ring.permissions",["Ring.auth"]);angularModule.provider("userPermissions",(function provider(){let _config={};this.config=config=>{_config=config},this.$get=["auth","$q","$http",(auth,$q,$http)=>{const apiUri=auth.auth.getAPIPath()+Permissions.API_PERMISSION_CACHE_PATH;_config.datasource=_config.datasource||async function datasource(query){const{data:data}=await $http.get(apiUri,{params:{fields:"permission/key,global,projects(id)",query:query}});return data};const permissions=new Permissions(auth.auth,_config);return permissions.load=function load(){return $q.when(Permissions.prototype.load.call(this))},permissions}]})),angularModule.directive("rgPermission",["userPermissions","$interpolate",function rgPermissionDirective(userPermissions,$interpolate){return{controller:["$scope","$element","$attrs",function controller($scope,$element,$attrs){const element=$element[0];this.permitted=!1,element.classList.add("ring-permission-hide");const permission=$interpolate($attrs.rgPermission)($scope),projectId=$attrs.hasOwnProperty("inGlobal")?PermissionCache.GLOBAL_PROJECT_ID:$scope.$eval($attrs.inProject);userPermissions.check(permission,projectId).then((permitted=>(this.permitted=permitted,permitted&&element.classList.remove("ring-permission-hide"),permitted))).then(registerPermission($element))}]}}]),angularModule.directive("rgPermissionIf",["$animate","userPermissions","$interpolate",function rgPermissionIfDirective($animate,userPermissions,$interpolate){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,require:"^?rgSomePermissions",link:function link(scope,iElement,iAttrs,somePermittedCtrl,$transclude){let block,childScope;const projectId=iAttrs.hasOwnProperty("inGlobal")?PermissionCache.GLOBAL_PROJECT_ID:scope.$eval(iAttrs.inProject),permission=$interpolate(iAttrs.rgPermissionIf)(scope);userPermissions.check(permission,projectId).then((permitted=>{permitted?childScope||(childScope=scope.$new(),$transclude(childScope,(clone=>{block={startNode:clone[0],endNode:clone[clone.length++]=document.createComment(` end rgPermissionIf: ${iAttrs.rgPermissionIf} `)},$animate.enter(clone,iElement.parent(),iElement)}))):(childScope&&(childScope.$destroy(),childScope=null),block&&($animate.leave(getBlockElements(block)),block=null))})).then(registerPermission(iElement))}}}]),angularModule.directive("rgSomePermissions",(function rgSomePermissionsDirective(){return{scope:{rgSomePermissions:"="},controller:["$scope",function controller($scope){const permissions=[];$scope.rgSomePermissions=!1,this.registerPermission=()=>{const permission={permitted:!1};return permissions.push(permission),permitted=>{permission.permitted=permitted,function checkPermissions(){for(let i=permissions.length-1;i>=0;i--)if(permissions[i].permitted)return void($scope.rgSomePermissions=!0);$scope.rgSomePermissions=!1}()}}}]}}));var permissions_ng_permissions_ng=angularModule.name},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./src/link/link.css":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__),_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_0_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_0_use_2_global_variables_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./src/global/variables.css"),___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_0_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_0_use_2_global_variables_css__WEBPACK_IMPORTED_MODULE_2__.default),___CSS_LOADER_EXPORT___.push([module.id,".link_c73c {\n  cursor: pointer;\n  transition: color var(--ring-fast-ease);\n\n  color: var(--ring-link-color);\n\n  outline: none;\n}\n\n@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.link_c73c:hover {\n    transition: none;\n\n    color: var(--ring-link-hover-color);\n  }}\n\n@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.link_c73c:hover {\n    text-decoration: none;\n  }}\n\n.link_c73c {\n    text-decoration: none;\n  }\n\n.link_c73c.hover_e4ca {\n    transition: none;\n\n    color: var(--ring-link-hover-color);\n  }\n\n@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.link_c73c:hover .inner_d16b {\n    border-width: 0;\n    border-bottom: 2px solid;\n    border-image-source: linear-gradient(currentcolor 50%, transparent 50%);\n    border-image-slice: 0 0 100% 0;\n  }}\n\n.link_c73c.active_eef2 {\n    color: inherit;\n  }\n\n@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.link_c73c.compatibilityUnderlineMode_a632:hover {\n    text-decoration: underline;\n\n    /* stylelint-disable-next-line selector-max-specificity */\n  }\n    .link_c73c.compatibilityUnderlineMode_a632:hover .inner_d16b {\n      border: none;\n    }}\n\n@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.link_c73c.pseudo_cb40:hover {\n    text-decoration: none;\n\n    /* stylelint-disable-next-line selector-max-specificity */\n  }\n    .link_c73c.pseudo_cb40:hover .inner_d16b {\n      border: none;\n    }}\n\n.link_c73c:focus-visible {\n    box-shadow: 0 0 0 2px var(--ring-border-hover-color);\n  }\n\n@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.link_c73c:hover .inner_d16b {\n    border-bottom-width: 1px;\n  }}\n}\n\n.text_e0fe {\n  border-radius: var(--ring-border-radius);\n}\n\n@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.inherit_c3d7:not(:hover) {\n  color: inherit;\n}}\n\n.pseudo_cb40 {\n  margin: 0;\n  padding: 0;\n\n  text-align: left;\n\n  border: 0;\n\n  background: transparent;\n\n  font: inherit;\n}\n\n.pseudo_cb40::-moz-focus-inner {\n    padding: 0;\n\n    border: 0;\n  }\n","",{version:3,sources:["webpack://./src/link/link.css","<no source>"],names:[],mappings:"AAEA;EACE,eAAe;EACf,uCAAuC;;EAEvC,6BAA6B;;EA2C7B,aAAa;AAKf;;ACtDA,wGAAA;IAAA,iBAAA;;IAAA,oCAAA;GAAA,CAAA;;AAAA,wGAAA;IAAA,sBAAA;GAAA,CAAA;;ADQE;IAEE,qBAAqB;EACvB;;AAEA;IAEE,gBAAgB;;IAEhB,mCAAmC;EACrC;;AClBF,wGAAA;IAAA,gBAAA;IAAA,yBAAA;IAAA,wEAAA;IAAA,+BAAA;GAAA,CAAA;;AD2BE;IACE,cAAc;EAChB;;AC7BF,wGAAA;IAAA,2BAAA;;IAAA,0DAAA;GAAA;IAAA;MAAA,aAAA;KAAA,CAAA;;AAAA,wGAAA;IAAA,sBAAA;;IAAA,0DAAA;GAAA;IAAA;MAAA,aAAA;KAAA,CAAA;;ADmDE;IACE,oDAAoD;EACtD;;AAGF,qECxDA,wGAAA;IAAA,yBAAA;GAAA,CAAA;AD4DA;;AAEA;EACE,wCAAwC;AAC1C;;AChEA,wGAAA;EAAA,eAAA;CAAA,CAAA;;ADsEA;EACE,SAAS;EACT,UAAU;;EAEV,gBAAgB;;EAEhB,SAAS;;EAET,uBAAuB;;EAEvB,aAAa;AAOf;;AALE;IACE,UAAU;;IAEV,SAAS;EACX",sourcesContent:['@import "../global/variables.css";\n\n.link {\n  cursor: pointer;\n  transition: color var(--ring-fast-ease);\n\n  color: var(--ring-link-color);\n\n  &,\n  &:hover {\n    text-decoration: none;\n  }\n\n  &:hover,\n  &.hover {\n    transition: none;\n\n    color: var(--ring-link-hover-color);\n  }\n\n  &:hover .inner {\n    border-width: 0;\n    border-bottom: 2px solid;\n    border-image-source: linear-gradient(currentcolor 50%, transparent 50%);\n    border-image-slice: 0 0 100% 0;\n  }\n\n  &.active {\n    color: inherit;\n  }\n\n  &.compatibilityUnderlineMode:hover {\n    text-decoration: underline;\n\n    /* stylelint-disable-next-line selector-max-specificity */\n    & .inner {\n      border: none;\n    }\n  }\n\n  &.pseudo:hover {\n    text-decoration: none;\n\n    /* stylelint-disable-next-line selector-max-specificity */\n    & .inner {\n      border: none;\n    }\n  }\n\n  outline: none;\n\n  &:focus-visible {\n    box-shadow: 0 0 0 2px var(--ring-border-hover-color);\n  }\n}\n\n@media (min-resolution: 2dppx) {\n  .link:hover .inner {\n    border-bottom-width: 1px;\n  }\n}\n\n.text {\n  border-radius: var(--ring-border-radius);\n}\n\n.inherit:not(:hover) {\n  color: inherit;\n}\n\n.pseudo {\n  margin: 0;\n  padding: 0;\n\n  text-align: left;\n\n  border: 0;\n\n  background: transparent;\n\n  font: inherit;\n\n  &::-moz-focus-inner {\n    padding: 0;\n\n    border: 0;\n  }\n}\n',null],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={link:"link_c73c",hover:"hover_e4ca",inner:"inner_d16b",active:"active_eef2",compatibilityUnderlineMode:"compatibilityUnderlineMode_a632",pseudo:"pseudo_cb40",text:"text_e0fe",inherit:"inherit_c3d7"},__webpack_exports__.default=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./src/permissions-ng/permissions-ng.css":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__),_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_0_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_0_use_2_global_variables_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./src/global/variables.css"),___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_0_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_0_use_2_global_variables_css__WEBPACK_IMPORTED_MODULE_2__.default),___CSS_LOADER_EXPORT___.push([module.id,".ring-permission-hide {\n  display: none !important;\n}\n","",{version:3,sources:["webpack://./src/permissions-ng/permissions-ng.css"],names:[],mappings:"AAEA;EACE,wBAAwB;AAC1B",sourcesContent:['@import "../global/variables.css";\n\n:global(.ring-permission-hide) {\n  display: none !important;\n}\n'],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={},__webpack_exports__.default=___CSS_LOADER_EXPORT___},"./src/link/link.css":function(module,__unused_webpack_exports,__webpack_require__){var API=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),domAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),insertFn=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),setAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),styleTagTransformFn=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./src/link/link.css");content=content.__esModule?content.default:content;var options={};options.styleTagTransform=styleTagTransformFn,options.setAttributes=setAttributes,options.insert=insertFn.bind(null,"head"),options.domAPI=domAPI,options.insertStyleElement=insertStyleElement;API(content,options);module.exports=content&&content.locals||{}},"./src/permissions-ng/permissions-ng.css":function(module,__unused_webpack_exports,__webpack_require__){var API=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),domAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),insertFn=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),setAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),styleTagTransformFn=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./src/permissions-ng/permissions-ng.css");content=content.__esModule?content.default:content;var options={};options.styleTagTransform=styleTagTransformFn,options.setAttributes=setAttributes,options.insert=insertFn.bind(null,"head"),options.domAPI=domAPI,options.insertStyleElement=insertStyleElement;API(content,options);module.exports=content&&content.locals||{}}}]);
(self.webpackChunk_jetbrains_ring_ui=self.webpackChunk_jetbrains_ring_ui||[]).push([[8184],{"./node_modules/@jetbrains/icons/checkmark.js":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.853 3.149c.248.24.254.636.014.884l-8.541 8.816a.625.625 0 0 1-.863.033L1.177 9.085a.625.625 0 0 1 .83-.936l3.837 3.401 8.125-8.387a.625.625 0 0 1 .884-.014Z" clip-rule="evenodd"/></svg>'},"./node_modules/@jetbrains/icons/close.js":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M13.442 2.558a.625.625 0 0 1 0 .884L8.883 8.006l4.546 4.552a.625.625 0 1 1-.884.884L8 8.89l-4.545 4.55a.625.625 0 0 1-.884-.883l4.546-4.552-4.56-4.564a.625.625 0 1 1 .885-.884L8 7.122l4.558-4.564a.625.625 0 0 1 .884 0Z" clip-rule="evenodd"/></svg>'},"./node_modules/@jetbrains/icons/exception.js":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM8.85 5a.85.85 0 1 0-1.7 0v3a.85.85 0 0 0 1.7 0V5ZM8 9.95a.85.85 0 0 0 0 1.7h.007a.85.85 0 0 0 0-1.7H8Z" clip-rule="evenodd"/></svg>'},"./node_modules/@jetbrains/icons/settings.js":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M9.67 1.449a.781.781 0 0 0-.56-.372 8.014 8.014 0 0 0-2.22 0 .781.781 0 0 0-.56.372L5.404 2.99a.84.84 0 0 1-.731.397l-1.887-.02a.804.804 0 0 0-.623.269 6.901 6.901 0 0 0-1.112 1.802.693.693 0 0 0 .064.64l.962 1.525a.736.736 0 0 1 0 .792L1.115 9.92a.693.693 0 0 0-.064.64 6.9 6.9 0 0 0 1.112 1.802c.15.177.382.271.623.269l1.887-.02a.84.84 0 0 1 .731.396l.926 1.543a.781.781 0 0 0 .56.372 8.008 8.008 0 0 0 2.22 0 .782.782 0 0 0 .56-.372l.925-1.543a.845.845 0 0 1 .732-.396l1.887.02a.804.804 0 0 0 .623-.269 6.903 6.903 0 0 0 1.112-1.802.693.693 0 0 0-.064-.64l-.962-1.525a.736.736 0 0 1 0-.792l.962-1.525a.693.693 0 0 0 .064-.64 6.901 6.901 0 0 0-1.112-1.802.804.804 0 0 0-.623-.269l-1.887.02a.84.84 0 0 1-.732-.397L9.67 1.45Zm0 0-.002.001-.02.012.02-.012.002-.001Zm-.022.013-.002.001ZM5.445 3.016l1.031.619A2.09 2.09 0 0 1 4.66 4.638L2.973 4.62a5.66 5.66 0 0 0-.648 1.035l.809 1.281a1.986 1.986 0 0 1 0 2.128l-.81 1.281c.178.366.395.712.649 1.035l1.687-.018a2.09 2.09 0 0 1 1.816 1.003l-1.072.643 1.072-.643.809 1.347a6.797 6.797 0 0 0 1.43 0l.809-1.347a2.09 2.09 0 0 1 1.816-1.003l1.687.018a5.64 5.64 0 0 0 .648-1.035l-.809-1.281a1.986 1.986 0 0 1 0-2.128l.81-1.281a5.66 5.66 0 0 0-.649-1.035l-1.687.018a2.09 2.09 0 0 1-1.816-1.003l-.809-1.347a6.788 6.788 0 0 0-1.43 0l-.809 1.347-1.031-.62Z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M5.019 8a2.981 2.981 0 1 1 5.962 0 2.981 2.981 0 0 1-5.962 0ZM8 6.27a1.731 1.731 0 1 0 0 3.462A1.731 1.731 0 0 0 8 6.27Z" clip-rule="evenodd"/></svg>'},"./node_modules/@jetbrains/icons/warning.js":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.7 14.243c.29.171.63.257 1.024.257h10.473c.393 0 .732-.086 1.016-.257.29-.172.513-.402.67-.691.159-.29.238-.61.238-.962a1.917 1.917 0 0 0-.271-.983L9.606 2.47a1.818 1.818 0 0 0-.718-.725A1.888 1.888 0 0 0 7.96 1.5c-.325 0-.636.081-.935.244a1.775 1.775 0 0 0-.71.725L1.07 11.607a2.018 2.018 0 0 0-.04 1.944c.157.29.38.52.67.692Zm6.267-4.43c-.393 0-.596-.2-.61-.597l-.094-3.292a.607.607 0 0 1 .182-.488.7.7 0 0 1 .509-.19.71.71 0 0 1 .514.197.59.59 0 0 1 .19.48L8.55 9.217c-.01.397-.204.596-.583.596Zm0 2.248a.829.829 0 0 1-.569-.21.706.706 0 0 1-.23-.535c0-.212.077-.388.23-.528a.814.814 0 0 1 .57-.217c.216 0 .401.07.555.21.158.14.237.318.237.535a.683.683 0 0 1-.237.535.811.811 0 0 1-.556.21Z" clip-rule="evenodd"/></svg>'},"./src/query-assist/query-assist.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,HugeOne:()=>HugeOne,WithCustomActions:()=>WithCustomActions,default:()=>query_assist_stories,disabledOne:()=>disabledOne,noAuth:()=>noAuth,withCustomRenderer:()=>withCustomRenderer});var react=__webpack_require__("./node_modules/react/index.js"),settings=__webpack_require__("./node_modules/@jetbrains/icons/settings.js"),settings_default=__webpack_require__.n(settings),hub_config=__webpack_require__("./.storybook/hub-config.ts"),auth_auth=__webpack_require__("./src/auth/auth.ts"),http_http=__webpack_require__("./src/http/http.ts"),list=__webpack_require__("./src/list/list.tsx"),icon=__webpack_require__("./src/icon/icon.tsx"),input=__webpack_require__("./src/input/input.tsx"),functionDebounce=function debounce(fn,wait,callFirst){var timeout=null,debouncedFn=null,clear=function(){timeout&&(clearTimeout(timeout),debouncedFn=null,timeout=null)},debounceWrapper=function(){if(!wait)return fn.apply(this,arguments);var context=this,args=arguments,callNow=callFirst&&!timeout;return clear(),debouncedFn=function(){fn.apply(context,args)},timeout=setTimeout((function(){if(timeout=null,!callNow){var call=debouncedFn;return debouncedFn=null,call()}}),wait),callNow?debouncedFn():void 0};return debounceWrapper.cancel=clear,debounceWrapper.flush=function(){var call=debouncedFn;clear(),call&&call()},debounceWrapper};var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),deep_equal=__webpack_require__("./node_modules/deep-equal/index.js"),deep_equal_default=__webpack_require__.n(deep_equal),search=__webpack_require__("./node_modules/@jetbrains/icons/search.js"),search_default=__webpack_require__.n(search),close_12px=__webpack_require__("./node_modules/@jetbrains/icons/close-12px.js"),close_12px_default=__webpack_require__.n(close_12px),get_uid=__webpack_require__("./src/global/get-uid.ts"),data_tests=__webpack_require__("./src/global/data-tests.ts"),dom=__webpack_require__("./src/global/dom.ts"),caret=__webpack_require__("./src/caret/caret.ts"),contenteditable=__webpack_require__("./src/contenteditable/contenteditable.tsx"),popup_menu=__webpack_require__("./src/popup-menu/popup-menu.tsx"),loader_inline=__webpack_require__("./src/loader-inline/loader-inline.tsx"),shortcuts=__webpack_require__("./src/shortcuts/shortcuts.ts"),rerender_hoc=__webpack_require__("./src/global/rerender-hoc.tsx"),button_button=__webpack_require__("./src/button/button.tsx"),controls_height=__webpack_require__("./src/global/controls-height.tsx"),input_input=__webpack_require__("./src/input/input.css"),input_default=__webpack_require__.n(input_input),i18n_context=__webpack_require__("./src/i18n/i18n-context.tsx"),query_assist=__webpack_require__("./src/query-assist/query-assist.css"),query_assist_default=__webpack_require__.n(query_assist),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");class QueryAssistSuggestions{static createKey(suggestion){const{description,group,icon,option,prefix="",suffix=""}=suggestion;return prefix+option+suffix+group+description+(icon?icon.substring(icon.length-44):"")}static renderLabel(suggestion){const{className,matchingStart=0,matchingEnd=0,option,prefix="",suffix=""}=suggestion;let wrappedOption,before="",after="";matchingStart!==matchingEnd?(before=option.substring(0,matchingStart),wrappedOption=(0,jsx_runtime.jsx)("span",{className:query_assist_default().highlight,children:option.substring(matchingStart,matchingEnd)}),after=option.substring(matchingEnd)):wrappedOption=option;const wrappedPrefix=prefix&&(0,jsx_runtime.jsx)("span",{className:query_assist_default().service,children:prefix}),wrappedSuffix=suffix&&(0,jsx_runtime.jsx)("span",{className:query_assist_default().service,children:suffix});return(0,jsx_runtime.jsxs)("span",{className,children:[wrappedPrefix,before,wrappedOption,after,wrappedSuffix]})}static renderGroupSeparator(suggestion,prevSuggestion){const{group,option}=suggestion,{SEPARATOR}=list.A.ListProps.Type;return prevSuggestion!==group?{key:option+group+SEPARATOR,description:group,rgItemType:SEPARATOR}:null}static renderList(suggestions,suggestionRenderer){const renderedSuggestions=[];return suggestions.forEach(((suggestion,index,arr)=>{const prevSuggestionGroup=arr[index-1]&&arr[index-1].group,groupSeparator=QueryAssistSuggestions.renderGroupSeparator(suggestion,prevSuggestionGroup);groupSeparator&&renderedSuggestions.push(groupSeparator),renderedSuggestions.push(suggestionRenderer(suggestion))})),renderedSuggestions}}const POPUP_COMPENSATION=popup_menu.A.ListProps.Dimension.ITEM_PADDING+popup_menu.A.PopupProps.Dimension.BORDER_WIDTH;function noop(){}class QueryAssist extends react.Component{static defaultProps={onApply:noop,onChange:noop,onApplySuggestion:noop,onClear:noop,onFocusChange:noop,size:input.or.L};static getDerivedStateFromProps({query},{prevQuery}){const nextState={prevQuery:query};return"string"==typeof query&&query!==prevQuery&&(nextState.query=query,nextState.placeholderEnabled=!query),nextState}constructor(props){super(props);const query=props.query||"";this.immediateState={query,caret:"number"==typeof props.caret&&Number.isFinite(props.caret)?props.caret:query.length,focus:Boolean(props.autoOpen||props.focus)}}state={dirty:!this.props.query,query:this.props.query,placeholderEnabled:!this.props.query,shortcuts:!!this.props.focus,suggestions:[],showPopup:!1};componentDidMount(){const query=this.props.query||"";this.immediateState={query,caret:"number"==typeof this.props.caret&&Number.isFinite(this.props.caret)?this.props.caret:query.length,focus:Boolean(this.props.autoOpen||this.props.focus)},this.setupRequestHandler(this.props.delay),"force"===this.props.autoOpen||this.props.autoOpen&&query.length>0?this.requestHandler().catch(noop):this.requestStyleRanges().catch(noop),this.setCaretPosition(),this._pushHistory(this.state)}shouldComponentUpdate(props,state){return state.query!==this.state.query||state.dirty!==this.state.dirty||state.loading!==this.state.loading||state.showPopup!==this.state.showPopup||state.suggestions!==this.state.suggestions||state.styleRanges!==this.state.styleRanges||state.placeholderEnabled!==this.state.placeholderEnabled||props.placeholder!==this.props.placeholder||props.disabled!==this.props.disabled||props.clear!==this.props.clear||props.focus!==this.props.focus||props.actions!==this.props.actions||props.loader!==this.props.loader||props.glass!==this.props.glass}componentDidUpdate(prevProps){const{caret,delay,query}=this.props,queryChanged=query!==prevProps.query;this.updateFocus(prevProps),this.setupRequestHandler(delay);"number"==typeof caret&&caret!==prevProps.caret&&(this.immediateState.prevCaret=prevProps.caret,this.immediateState.caret=caret),"string"==typeof query&&queryChanged&&query!==this.immediateState.query&&(this.immediateState.query=query,query&&("force"===this.props.autoOpen||prevProps.autoOpen&&query.length>0)?this.requestData?.():query&&this.requestStyleRanges())}static ngModelStateField="query";immediateState;requestData;ngModelStateField="query";historyStack=[];mouseIsDownOnPopup;handleFocusChange=e=>{const focus="focus"===e.type;this.immediateState.focus=focus,focus?this.setCaretPosition():(this.blurInput(),this.mouseIsDownOnPopup||this.closePopup()),this.mouseIsDownOnPopup||this.props.onFocusChange({focus}),this.setState({shortcuts:focus})};node;nodeRef=node=>{this.node=node};updateFocus({focus,caret}){const isCaretChanged=caret!==this.props.caret,isFocusChanged=focus!==this.props.focus;if(isFocusChanged||isCaretChanged){const focusValue=!isFocusChanged||this.props.focus;this.setFocus(focusValue)}}setCaretPosition=(params={})=>{const queryLength=null!=this.immediateState.query?this.immediateState.query.length:0,newCaretPosition=this.immediateState.caret<queryLength?this.immediateState.caret:queryLength;params.fromContentEditable&&(this.immediateState.selection=this.immediateState.selection?this.immediateState.selection:this.state.query&&this.state.query.length||null),this.immediateState.focus&&!this.props.disabled&&("number"==typeof this.immediateState.selection&&Number.isInteger(this.immediateState.selection)&&this.immediateState.selection>-1?(this.caret?.setPosition(newCaretPosition>=0?newCaretPosition:-1),this.scrollInput()):this.immediateState.selection&&"object"==typeof this.immediateState.selection&&void 0!==this.immediateState.selection.startOffset?this.caret?.setPosition(this.immediateState.selection):(void 0===this.immediateState.selection||params.forceSetCaret)&&this.caret?.setPosition(-1))};scrollInput(){const caretOffset=this.caret?.getOffset();this.input?.clientWidth!==this.input?.scrollWidth&&null!=caretOffset&&null!=this.input?.clientWidth&&caretOffset>this.input.clientWidth&&(this.input.scrollLeft+=caretOffset)}getQuery(){var _this$input$textConte;return null!==(_this$input$textConte=this.input?.textContent?.replace(/\s/g," "))&&void 0!==_this$input$textConte?_this$input$textConte:""}isRenderingGlassOrLoader(){const renderLoader=!1!==this.props.loader&&this.state.loading;return this.props.glass||renderLoader}togglePlaceholder=()=>{const newQueryIsEmpty=""===this.getQuery();newQueryIsEmpty!==(""===this.immediateState.query)&&this.setState({placeholderEnabled:newQueryIsEmpty})};isComposing;handleInput=e=>{var _currentCaret$positio;this.togglePlaceholder();const currentCaret=this.caret?.getPosition(),props={dirty:!0,query:this.getQuery(),caret:"number"==typeof currentCaret?currentCaret:null!==(_currentCaret$positio=currentCaret?.position)&&void 0!==_currentCaret$positio?_currentCaret$positio:0,focus:!0};if(this.immediateState.query!==props.query||this.isComposing){if(!this.isComposing){if(this.immediateState=props,this.state.query){var _this$state$styleRang;let i=0;for(;this.state.query[i]===this.immediateState.query[i]&&i<this.state.query.length-1;)i++;const diff=this.immediateState.query.length-this.state.query.length,originalIndex=this.immediateState.caret-diff,ranges=[...null!==(_this$state$styleRang=this.state.styleRanges)&&void 0!==_this$state$styleRang?_this$state$styleRang:[]],range=ranges.find((r=>originalIndex>=r.start&&originalIndex<=r.start+r.length));range&&(range.length+=diff),ranges.filter((r=>r.start>originalIndex)).forEach((r=>{r.start+=diff}))}this.props.onChange(props),("force"===this.props.autoOpen||props.query.length>0)&&this.requestData?.()}}else this.handleCaretMove(e)};handleEnter=e=>{"Enter"===e.key&&(0,dom.wo)(e)};handleTab=e=>{const list=this._popup&&this._popup.list,suggestion=list&&(list.getSelected()||list.getFirst());return suggestion&&this.state.showPopup?((0,dom.wo)(e),this.getQuery()===this.immediateState.suggestionsQuery&&this.handleComplete(suggestion,!0)):!this.state.loading||((0,dom.wo)(e),!1)};setState=(state,resolve)=>{super.setState(state,(()=>{this._pushHistory(state),resolve?.()}))};_pushHistory(state){const queryIsSet="query"in state,queryIsSame=this.historyStack[0]?.query===state.query;var _this$caret$getPositi;queryIsSet&&!queryIsSame&&this.historyStack.unshift({query:state.query,caret:null!==(_this$caret$getPositi=this.caret?.getPosition({avoidFocus:!0}))&&void 0!==_this$caret$getPositi?_this$caret$getPositi:-1})}undo=e=>{const previous=this.historyStack.splice(0,2)[1];previous&&this.setState({query:previous.query},(()=>{this.caret?.setPosition(previous.caret),this.handleInput(e)}))};handlePaste=e=>{if(e.clipboardData&&document.queryCommandSupported("insertText")){(0,dom.wo)(e);const text=function cleanText(text){return text.replace(/([\n\r])+/g," ")}(e.clipboardData.getData("text/plain"));document.execCommand("insertText",!1,text),this.handleInput(e)}};handleCaretMove=e=>{var _currentCaret$positio2;if(this.isComposing)return;const currentCaret=this.caret?.getPosition(),caret="number"==typeof currentCaret?currentCaret:null!==(_currentCaret$positio2=currentCaret?.position)&&void 0!==_currentCaret$positio2?_currentCaret$positio2:0,popupHidden=!this.state.showPopup&&"click"===e.type;this.props.disabled||caret===this.immediateState.caret&&!popupHidden||(this.immediateState.prevCaret=this.immediateState.caret,this.immediateState.caret=caret,this.scrollInput(),this.immediateState.query.length>0&&this.requestData?.()),"force"!==this.props.autoOpen&&this.immediateState.query.length<1&&this.setState({showPopup:!1})};handleStyleRangesResponse=({suggestions,...restProps})=>this.handleResponse(restProps);handleResponse=({query="",caret=0,styleRanges,suggestions=[]},afterCompletion=!1)=>new Promise(((resolve,reject)=>{if(query!==this.getQuery()||caret!==this.immediateState.caret&&void 0!==this.immediateState.caret)reject(new Error("Current and response queries mismatch"));else{if(!this.node)return;const state={dirty:this.immediateState.dirty,loading:!1,placeholderEnabled:!query,query,suggestions,showPopup:!(!suggestions.length||"force"!==this.props.autoOpen&&afterCompletion)};this.immediateState.suggestionsQuery=query,deep_equal_default()(this.state.styleRanges,styleRanges)||(state.styleRanges=styleRanges),this.immediateState.selection=this.caret?.getPosition({avoidFocus:!0}),this.setState(state,resolve)}}));handleApply=()=>(this.closePopup(),this.immediateState.dirty=!1,this.immediateState.query===this.state.query&&this.setState({dirty:!1}),this.props.onApply(this.immediateState));handleComplete=(data,replace)=>{var _suggestion$caret,_suggestion$caret2;if(!data||!data.data)return void this.handleApply();const query=this.getQuery(),currentCaret=this.immediateState.caret,suggestion=data.data,prefix=suggestion.prefix||"",suffix=suggestion.suffix||"",state={prevCaret:currentCaret,caret:null!==(_suggestion$caret=suggestion.caret)&&void 0!==_suggestion$caret?_suggestion$caret:0,selection:null!==(_suggestion$caret2=suggestion.caret)&&void 0!==_suggestion$caret2?_suggestion$caret2:0,query:query.substr(0,suggestion.completionStart)+prefix+suggestion.option+suffix};var _suggestion$completio;"boolean"==typeof replace&&replace?state.query+=this.immediateState.query.substr(null!==(_suggestion$completio=suggestion.completionEnd)&&void 0!==_suggestion$completio?_suggestion$completio:0):state.query+=this.immediateState.query.substr(this.immediateState.caret);this.props.onChange(state),this.props.onApplySuggestion(data.data,state);const focusState={focus:!0};this.props.onFocusChange(focusState),state.query!==this.immediateState.query&&this.setState({placeholderEnabled:!state.query,query:state.query}),this.immediateState=Object.assign(state,focusState),this.immediateState.caret!==currentCaret&&this.setCaretPosition(),this.closePopup(),this.requestData?.(!0)};requestStyleRanges=()=>{const{query,caret}=this.immediateState;return query?this.sendRequest({query,caret,omitSuggestions:!0}).then(this.handleStyleRangesResponse).catch(noop):Promise.reject(new Error("Query is empty"))};requestHandler=(afterCompletion=!1)=>{if(this.props.disabled)return Promise.reject(new Error("QueryAssist(@jetbrains/ring-ui): null exception"));const{query,caret}=this.immediateState;return this.sendRequest({query,caret}).then((data=>this.handleResponse(data,afterCompletion))).catch(noop)};sendRequest(params){const value=this.props.dataSource(params),dataPromise=Promise.resolve(value),timeout=window.setTimeout((()=>{this.node&&this.setState({loading:!0}),params.query===this.immediateState.query&&this.closePopup()}),500);return dataPromise.then((()=>window.clearTimeout(timeout))).catch((()=>{window.clearTimeout(timeout),this.setState({loading:!1})})),dataPromise}getPopupOffset(suggestions){const minOffset=this.isRenderingGlassOrLoader()?12:0;if(!this.input)return minOffset;const suggestion=suggestions&&suggestions[0],completionStart=suggestion&&suggestion.completionStart!==suggestion.completionEnd&&suggestion.completionStart,inputChildren=this.input.firstChild instanceof Element&&this.input.firstChild.children,completionStartNode=inputChildren&&"number"==typeof completionStart&&inputChildren[Math.min(completionStart,inputChildren.length-1)];let offset=completionStartNode&&(0,dom.l)(completionStartNode).right-(0,dom.l)(this.input).left;if(!offset){var _this$caret$getOffset;const caret=null!==(_this$caret$getOffset=this.caret?.getOffset())&&void 0!==_this$caret$getOffset?_this$caret$getOffset:0;if(0===caret)return minOffset;offset=caret}const result=offset-POPUP_COMPENSATION;return result<minOffset?minOffset:result}handleCtrlSpace=e=>{(0,dom.wo)(e),this.state.showPopup||this.requestData?.()};trackPopupMouseState=e=>{this.mouseIsDownOnPopup="mousedown"===e.type};trackCompositionState=e=>{this.isComposing="compositionend"!==e.type};closePopup=()=>{this.node&&this.setState({showPopup:!1})};clearQuery=()=>{const state={dirty:!1,caret:0,query:"",focus:!0};this.props.onChange(state),this.props.onClear(),this.immediateState=state,this.setState({dirty:!1,query:"",placeholderEnabled:!0,loading:!1})};blurInput(){this.immediateState.selection=null,this.props.focus||this.caret?.target.blur()}setupRequestHandler(delay){const needDelay="number"==typeof delay,hasDelay=this.requestData!==this.requestHandler;this.requestData&&hasDelay===needDelay||(this.requestData=needDelay?functionDebounce(this.requestHandler,delay):this.requestHandler)}_renderSuggestion(suggestion){const{ITEM}=popup_menu.A.ListProps.Type,{description,icon,group}=suggestion;return{key:QueryAssistSuggestions.createKey(suggestion),icon,label:QueryAssistSuggestions.renderLabel(suggestion),description,group,rgItemType:ITEM,data:suggestion}}renderSuggestions(){const{suggestions}=this.state;return suggestions&&suggestions.length?QueryAssistSuggestions.renderList(suggestions,this._renderSuggestion):[]}renderQuery(){const{dirty,styleRanges,query}=this.state,classes=[],LETTER_DEFAULT_CLASS=query_assist_default().letterDefault;return styleRanges&&styleRanges.length&&styleRanges.forEach(((item,index)=>{if(dirty&&index===styleRanges.length-1&&"text"===item.style)return;const styleName=`letter-${item.style.replace("_","-")}`;for(let i=item.start;i<item.start+item.length;i++)classes[i]=query_assist_default()[styleName]})),query&&Array.from(query).map(((letter,index,letters)=>{const className=classnames_default()(query_assist_default().letter,classes[index]||LETTER_DEFAULT_CLASS),dataTest=letters.length-1===index?"ring-query-assist-last-letter":null;return(0,jsx_runtime.jsx)("span",{className,"data-test":dataTest,children:" "===letter?"Â ":letter},index+letter)}))}setFocus(focus){this.setState({shortcuts:!!focus});const isComponentFocused=Boolean(this.immediateState.focus);!1===focus&&isComponentFocused?(this.immediateState.focus=focus,this.blurInput()):!0!==focus||isComponentFocused||(this.immediateState.focus=focus,this.setCaretPosition({forceSetCaret:!0}))}input;caret;inputRef=node=>{node&&(this.input=node,this.caret=new caret.A(this.input))};_popup;popupRef=node=>{this._popup=node};placeholder;placeholderRef=node=>{this.placeholder=node};glass;glassRef=node=>{this.glass=node};loader;loaderRef=node=>{this.loader=node};clear;clearRef=node=>{this.clear=node};shortcutsScope=(0,get_uid.A)("ring-query-assist-");shortcutsMap={del:noop,enter:()=>this.handleComplete(),"command+enter":()=>this.handleComplete(),"ctrl+enter":()=>this.handleComplete(),"ctrl+space":this.handleCtrlSpace,tab:this.handleTab,"meta+z":this.undo,right:noop,left:noop,space:noop,home:noop,end:noop};listShortcutsMap={home:noop,end:noop};renderActions(){const actions=[...this.props.actions||[]];return this.props.clear&&!!this.state.query&&actions.push((0,jsx_runtime.jsx)(i18n_context.g.Consumer,{children:({translate})=>{var _this$props$translati;return(0,jsx_runtime.jsx)(button_button.Ay,{icon:close_12px_default(),className:query_assist_default().clear,title:null!==(_this$props$translati=this.props.translations?.clearTitle)&&void 0!==_this$props$translati?_this$props$translati:translate("clearTitle"),ref:this.clearRef,onClick:this.clearQuery,"data-test":"query-assist-clear-icon"})}},"clearAction")),actions}render(){const{glass,"data-test":dataTest,className,useCustomItemRender,huge,size,translations}=this.props,renderPlaceholder=!!this.props.placeholder&&this.state.placeholderEnabled,renderLoader=!1!==this.props.loader&&this.state.loading,renderGlass=glass&&!renderLoader,actions=this.renderActions(),containerClasses=classnames_default()(className,input_default()[`size${huge?input.or.FULL:size}`],{[query_assist_default().queryAssist]:!0,[query_assist_default().withIcon]:renderGlass&&!huge||renderLoader,[query_assist_default().huge]:huge,[query_assist_default().queryAssistDisabled]:this.props.disabled}),inputClasses=classnames_default()(this.props.inputClassName,{[`${query_assist_default().input} ring-js-shortcuts`]:!0,[query_assist_default().inputGap]:actions.length||this.isRenderingGlassOrLoader()&&!glass,[query_assist_default().inputGap2]:2===actions.length,[query_assist_default().inputRevertOrder]:!glass||huge}),placeholderStyles=classnames_default()({[query_assist_default().placeholder]:!0,[query_assist_default().hugePlaceholder]:huge,[query_assist_default().withoutGlass]:!glass||!renderLoader&&huge});return(0,jsx_runtime.jsx)(controls_height.VJ.Provider,{value:controls_height.sr.M,children:(0,jsx_runtime.jsx)(i18n_context.g.Consumer,{children:({translate})=>{var _translations$searchT,_translations$searchT2,_translations$searchT3;return(0,jsx_runtime.jsxs)("div",{"data-test":(0,data_tests.A)("ring-query-assist",dataTest),className:containerClasses,role:"presentation",ref:this.nodeRef,children:[this.state.shortcuts&&(0,jsx_runtime.jsx)(shortcuts.A,{map:this.shortcutsMap,scope:this.shortcutsScope}),renderGlass&&!huge&&(0,jsx_runtime.jsx)(icon.Ay,{glyph:search_default(),className:query_assist_default().icon,title:null!==(_translations$searchT=translations?.searchTitle)&&void 0!==_translations$searchT?_translations$searchT:translate("searchTitle"),ref:this.glassRef,"data-test":"query-assist-search-icon"}),renderLoader&&(0,jsx_runtime.jsx)("div",{className:classnames_default()(query_assist_default().icon,query_assist_default().loader,{[query_assist_default().loaderOnTheRight]:!glass&&!huge,[query_assist_default().loaderActive]:renderLoader}),ref:this.loaderRef,children:(0,jsx_runtime.jsx)(loader_inline.A,{})}),(0,jsx_runtime.jsx)(contenteditable.A,{"aria-label":null!==(_translations$searchT2=translations?.searchTitle)&&void 0!==_translations$searchT2?_translations$searchT2:translate("searchTitle"),className:inputClasses,"data-test":"ring-query-assist-input",inputRef:this.inputRef,disabled:this.props.disabled,onComponentUpdate:()=>this.setCaretPosition({fromContentEditable:!0}),onBlur:this.handleFocusChange,onClick:this.handleCaretMove,onCompositionStart:this.trackCompositionState,onCompositionEnd:this.trackCompositionState,onFocus:this.handleFocusChange,onInput:this.handleInput,onKeyUp:this.handleInput,onKeyDown:this.handleEnter,onPaste:this.handlePaste,spellCheck:"false",children:this.state.query&&(0,jsx_runtime.jsx)("span",{children:this.renderQuery()})}),renderPlaceholder&&(0,jsx_runtime.jsx)("button",{type:"button",className:placeholderStyles,ref:this.placeholderRef,onClick:this.handleCaretMove,"data-test":"query-assist-placeholder",disabled:this.props.disabled,children:this.props.placeholder}),actions.length?(0,jsx_runtime.jsx)("div",{"data-test":"ring-query-assist-actions",className:query_assist_default().actions,children:actions}):null,(0,jsx_runtime.jsx)(popup_menu.A,{hidden:!this.state.showPopup,onCloseAttempt:this.closePopup,ref:this.popupRef,anchorElement:this.node,keepMounted:!0,attached:!0,className:this.props.popupClassName,directions:[popup_menu.A.PopupProps.Directions.BOTTOM_RIGHT],data:useCustomItemRender?this.state.suggestions:this.renderSuggestions(),"data-test":"ring-query-assist-popup",hint:this.props.hint,shortcutsMap:this.listShortcutsMap,hintOnSelection:this.props.hintOnSelection,left:this.getPopupOffset(this.state.suggestions),maxHeight:popup_menu.A.PopupProps.MaxHeight.SCREEN,onMouseDown:this.trackPopupMouseState,onMouseUp:this.trackPopupMouseState,onSelect:item=>this.handleComplete(item)}),glass&&huge&&(0,jsx_runtime.jsx)("div",{className:query_assist_default().rightSearchButton,"data-test":"query-assist-search-button",children:(0,jsx_runtime.jsx)(icon.Ay,{glyph:search_default(),className:query_assist_default().rightSearchIcon,title:null!==(_translations$searchT3=translations?.searchTitle)&&void 0!==_translations$searchT3?_translations$searchT3:translate("searchTitle"),onClick:this.handleApply,ref:this.glassRef,"data-test":"query-assist-search-icon"})})]})}})})}}(0,rerender_hoc.A)(QueryAssist);QueryAssist.__docgenInfo={description:"## Data source function\n\n Component class calls a data source function when user input happens and passes an object with fields \\`caret\\`, \\`focus\\` and \\`query\\` as the only argument.\n The function must return an object with the fields described below. The object can be optionally wrapped in a Promise.\n\n ### Return object fields\n\n \\`caret\\` and \\`query\\` should just return server values provided to data source function.\n These fields allow the Query Assist component to recognise and drop earlier responses from the server.\n\n + __caret__ (\\`string=0\\`) Caret from request\n + __query__ (\\`string=''\\`) Query from request\n + __styleRanges__ (\\`Array<suggestion>=\\`) Array of \\`styleRange\\` objects, used to highlight the request in the input field\n + __suggestions__ (\\`Array<styleRange>\\`) Array of \\`suggestion\\` objects to show.\n\n ### **styleRange** object fields\n\n start \\`number\\` Range start (in characters)\n length \\`number\\` Range length (in characters)\n style \\`string\\` Style of the range. Possible values: \\`text\\`, \\`field_value\\`, \\`field_name\\`, \\`operator\\`\n\n ### **suggestion** object fields\n\n + __prefix__ \\`string=\\` Suggestion option prefix\n + __option__ \\`string\\` Suggestion option\n + __suffix__ \\`string=\\` Suggestion option suffix\n + __description__ \\`string=\\` Suggestion option description. Is not visible when a group is set\n + __matchingStart__ \\`number\\` (required when matchingEnd is set) Start of the highlighted part of an option in the suggestions list (in characters)\n + __matchingEnd__ \\`number\\` (required when matchingEnd is set) End of the highlighted part of an option in the suggestions list (in characters)\n + __caret__ \\`number\\` Caret position after option completion (in characters)\n + __completionStart__ \\`number\\` Where to start insertion (or replacement, when completing with the \\`Tab\\` key) of the completion option (in characters)\n + __completionEnd__ \\`number\\` Where to end insertion of the completion option (in characters)\n + __group__ \\`string=\\` Group title. Options with the same title are grouped under it\n + __icon__ \\`string=\\` Icon URI, Data URI is possible",methods:[{name:"handleFocusChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"SyntheticEvent",alias:"SyntheticEvent"}}],returns:null},{name:"nodeRef",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]}}],returns:null},{name:"updateFocus",docblock:null,modifiers:[],params:[{name:"{focus, caret}: QueryAssistProps",optional:!1,type:{name:"QueryAssistProps",alias:"QueryAssistProps"}}],returns:null},{name:"setCaretPosition",docblock:null,modifiers:[],params:[{name:"params",optional:!0,type:null}],returns:null},{name:"scrollInput",docblock:null,modifiers:[],params:[],returns:null},{name:"getQuery",docblock:null,modifiers:[],params:[],returns:null},{name:"isRenderingGlassOrLoader",docblock:null,modifiers:[],params:[],returns:null},{name:"togglePlaceholder",docblock:null,modifiers:[],params:[],returns:null},{name:"handleInput",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"union",raw:"Event | SyntheticEvent",elements:[{name:"Event"},{name:"SyntheticEvent"}]}}],returns:null},{name:"handleEnter",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent",alias:"React.KeyboardEvent"}}],returns:null},{name:"handleTab",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"Event",alias:"Event"}}],returns:null},{name:"setState",docblock:null,modifiers:[],params:[{name:"state",optional:!1,type:{name:"Partial",elements:[{name:"QueryAssistState"}],raw:"Partial<QueryAssistState>",alias:"Partial"}},{name:"resolve",optional:!0,type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}}}],returns:null},{name:"undo",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"Event",alias:"Event"}}],returns:null},{name:"handlePaste",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactClipboardEvent",raw:"React.ClipboardEvent",alias:"React.ClipboardEvent"}}],returns:null},{name:"handleCaretMove",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"union",raw:"Event | SyntheticEvent",elements:[{name:"Event"},{name:"SyntheticEvent"}]}}],returns:null},{name:"handleStyleRangesResponse",docblock:null,modifiers:[],params:[{name:"{suggestions, ...restProps}: QueryAssistResponse",optional:!1,type:{name:"QueryAssistResponse",alias:"QueryAssistResponse"}}],returns:null},{name:"handleResponse",docblock:null,modifiers:[],params:[{name:"{\n  query = '',\n  caret = 0,\n  styleRanges,\n  suggestions = []\n}: QueryAssistResponse",optional:!1,type:{name:"QueryAssistResponse",alias:"QueryAssistResponse"}},{name:"afterCompletion",optional:!0,type:null}],returns:null},{name:"handleApply",docblock:null,modifiers:[],params:[],returns:null},{name:"handleComplete",docblock:null,modifiers:[],params:[{name:"data",optional:!0,type:{name:"SuggestionItem",alias:"SuggestionItem"}},{name:"replace",optional:!0,type:{name:"boolean"}}],returns:null},{name:"requestStyleRanges",docblock:null,modifiers:[],params:[],returns:null},{name:"requestHandler",docblock:null,modifiers:[],params:[{name:"afterCompletion",optional:!0,type:null}],returns:null},{name:"sendRequest",docblock:null,modifiers:[],params:[{name:"params",optional:!1,type:{name:"QueryAssistRequestParams",alias:"QueryAssistRequestParams"}}],returns:null},{name:"getPopupOffset",docblock:null,modifiers:[],params:[{name:"suggestions",optional:!1,type:{name:"unknown"}}],returns:null},{name:"handleCtrlSpace",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"Event",alias:"Event"}}],returns:null},{name:"trackPopupMouseState",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"SyntheticEvent",alias:"SyntheticEvent"}}],returns:null},{name:"trackCompositionState",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"SyntheticEvent",alias:"SyntheticEvent"}}],returns:null},{name:"closePopup",docblock:null,modifiers:[],params:[],returns:null},{name:"clearQuery",docblock:null,modifiers:[],params:[],returns:null},{name:"blurInput",docblock:null,modifiers:[],params:[],returns:null},{name:"setupRequestHandler",docblock:"Optionally setup data request delay. For each component create a separate\ninstance of the delayed function. This may help reduce the load on the server\nwhen the user quickly inputs data.",modifiers:[],params:[{name:"delay",optional:!0,type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}}],returns:null,description:"Optionally setup data request delay. For each component create a separate\ninstance of the delayed function. This may help reduce the load on the server\nwhen the user quickly inputs data."},{name:"renderSuggestions",docblock:null,modifiers:[],params:[],returns:null},{name:"renderQuery",docblock:null,modifiers:[],params:[],returns:null},{name:"setFocus",docblock:null,modifiers:[],params:[{name:"focus",optional:!1,type:{name:"union",raw:"boolean | null | undefined",elements:[{name:"boolean"},{name:"null"},{name:"undefined"}]}}],returns:null},{name:"inputRef",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]}}],returns:null},{name:"popupRef",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"union",raw:"PopupMenu<SuggestionItem> | null",elements:[{name:"PopupMenu",elements:[{name:"SuggestionItem"}],raw:"PopupMenu<SuggestionItem>"},{name:"null"}]}}],returns:null},{name:"placeholderRef",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]}}],returns:null},{name:"glassRef",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"union",raw:"ComponentRef<typeof Icon> | null",elements:[{name:"ComponentRef",elements:[{name:"Icon"}],raw:"ComponentRef<typeof Icon>"},{name:"null"}]}}],returns:null},{name:"loaderRef",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]}}],returns:null},{name:"clearRef",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"union",raw:"ComponentRef<typeof Button> | null",elements:[{name:"ComponentRef",elements:[{name:"Button"}],raw:"ComponentRef<typeof Button>"},{name:"null"}]}}],returns:null},{name:"renderActions",docblock:null,modifiers:[],params:[],returns:null}],displayName:"QueryAssist",props:{onApply:{required:!1,tsType:{name:"signature",type:"function",raw:"(change: QueryAssistChange) => void",signature:{arguments:[{type:{name:"QueryAssistChange"},name:"change"}],return:{name:"void"}}},description:"Called when the query is applied. An object with fields `caret`, `focus` and `query` is passed as an argument",defaultValue:{value:"function noop() {}",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(change: QueryAssistChange) => void",signature:{arguments:[{type:{name:"QueryAssistChange"},name:"change"}],return:{name:"void"}}},description:"Called when the query is changed. An object with fields `caret` and `query` is passed as an argument",defaultValue:{value:"function noop() {}",computed:!1}},onApplySuggestion:{required:!1,tsType:{name:"signature",type:"function",raw:"(suggestion: QueryAssistSuggestion, change: QueryAssistChange) => void",signature:{arguments:[{type:{name:"QueryAssistSuggestion"},name:"suggestion"},{type:{name:"QueryAssistChange"},name:"change"}],return:{name:"void"}}},description:"Called when the suggestion is applied",defaultValue:{value:"function noop() {}",computed:!1}},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Called when the query is cleared. Called without arguments",defaultValue:{value:"function noop() {}",computed:!1}},onFocusChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(change: FocusChange) => void",signature:{arguments:[{type:{name:"FocusChange"},name:"change"}],return:{name:"void"}}},description:"Called when the focus status is changed. An object with fields `focus` is passed as an argument",defaultValue:{value:"function noop() {}",computed:!1}},translations:{required:!1,tsType:{name:"union",raw:"QueryAssistTranslations | null | undefined",elements:[{name:"QueryAssistTranslations"},{name:"null"},{name:"undefined"}]},description:""},autoOpen:{required:!1,tsType:{name:"union",raw:"boolean | null | undefined | 'force'",elements:[{name:"boolean"},{name:"null"},{name:"undefined"},{name:"literal",value:"'force'"}]},description:"Open suggestions popup during the initial render"},caret:{required:!1,tsType:{name:"union",raw:"number | null | undefined",elements:[{name:"number"},{name:"null"},{name:"undefined"}]},description:"Initial caret position"},clear:{required:!1,tsType:{name:"union",raw:"boolean | null | undefined",elements:[{name:"boolean"},{name:"null"},{name:"undefined"}]},description:'Show clickable "cross" icon on the right which clears the query'},className:{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:"Additional class for the component"},popupClassName:{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:"Additional class for the popup"},inputClassName:{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:"Additional class for the input"},dataSource:{required:!0,tsType:{name:"signature",type:"function",raw:"(params: QueryAssistRequestParams) => Promise<QueryAssistResponse> |\nQueryAssistResponse",signature:{arguments:[{type:{name:"QueryAssistRequestParams"},name:"params"}],return:{name:"union",raw:"Promise<QueryAssistResponse> |\nQueryAssistResponse",elements:[{name:"Promise",elements:[{name:"QueryAssistResponse"}],raw:"Promise<QueryAssistResponse>"},{name:"QueryAssistResponse"}]}}},description:"Data source function"},delay:{required:!1,tsType:{name:"union",raw:"number | null | undefined",elements:[{name:"number"},{name:"null"},{name:"undefined"}]},description:"Input debounce delay"},disabled:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Disable the component"},focus:{required:!1,tsType:{name:"union",raw:"boolean | null | undefined",elements:[{name:"boolean"},{name:"null"},{name:"undefined"}]},description:"Initial focus"},hint:{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:"Hint under the suggestions list"},hintOnSelection:{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:"Hint under the suggestions list visible when a suggestion is selected"},glass:{required:!1,tsType:{name:"union",raw:"boolean | null | undefined",elements:[{name:"boolean"},{name:"null"},{name:"undefined"}]},description:'Show clickable "glass" icon on the right which applies the query'},loader:{required:!1,tsType:{name:"union",raw:"boolean | null | undefined",elements:[{name:"boolean"},{name:"null"},{name:"undefined"}]},description:"Show loader when a data request is in process"},placeholder:{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:"Field placeholder value"},query:{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:"Initial query"},useCustomItemRender:{required:!1,tsType:{name:"union",raw:"boolean | null | undefined",elements:[{name:"boolean"},{name:"null"},{name:"undefined"}]},description:""},actions:{required:!1,tsType:{name:"union",raw:"ReactNode[] | null | undefined",elements:[{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},{name:"null"},{name:"undefined"}]},description:""},"data-test":{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:""},huge:{required:!1,tsType:{name:"union",raw:"boolean | null | undefined",elements:[{name:"boolean"},{name:"null"},{name:"undefined"}]},description:""},size:{required:!1,tsType:{name:"Size"},description:"",defaultValue:{value:"Size.L",computed:!0}}}};const query_assist_stories={title:"Components/Query Assist",component:QueryAssist,args:{placeholder:"placeholder",glass:!0,clear:!0,hint:"hint",hintOnSelection:"hint on selection"}},Basic=args=>{const[authReady,setAuthReady]=(0,react.useState)(!1),auth=(0,react.useMemo)((()=>new auth_auth.Ay(hub_config.A)),[]);(0,react.useEffect)((()=>{auth.init().then((()=>setAuthReady(!0)))}),[auth]);const dataSource=(0,react.useMemo)((()=>{const http=new http_http.Ay(auth,auth.getAPIPath());return props=>{const params={query:{...props,fields:"query,caret,styleRanges"+(props.omitSuggestions?"":",suggestions")}};return http.get("users/queryAssist",params)}}),[auth]);return authReady?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(QueryAssist,{...args,dataSource}),(0,jsx_runtime.jsx)(QueryAssist,{...args,dataSource,size:input.or.S})]}):(0,jsx_runtime.jsx)("span",{children:"Loading..."})};Basic.storyName="basic",Basic.parameters={screenshots:{skip:!0}},Basic.args={query:"test",focus:!0,hint:"lol",hintOnSelection:"lol selected",popupClassName:"test",className:"custom-class"},Basic.tags=["skip-test"];const noAuth=args=>(0,jsx_runtime.jsx)(QueryAssist,{...args});noAuth.storyName="no auth",noAuth.args={dataSource:({query,caret})=>({query,caret,styleRanges:[{start:0,length:1,style:"text"},{start:1,length:1,style:"field_value"},{start:2,length:1,style:"field_name"},{start:3,length:1,style:"operator"}],suggestions:[{prefix:"login: ",option:"test",suffix:" ",description:"1",matchingStart:0,matchingEnd:query.length,caret:2,completionStart:0,completionEnd:query.length,group:"Logins"},{prefix:"login: ",option:"test.1",suffix:" ",description:"2",matchingStart:0,matchingEnd:query.length,caret:2,completionStart:0,completionEnd:query.length,group:"Logins"},{prefix:"name: ",option:"another",suffix:" ",description:"2",matchingStart:0,matchingEnd:query.length,caret:2,completionStart:0,completionEnd:query.length,group:"Names"}]})},noAuth.parameters={screenshots:{actions:[{type:"capture",name:"queryAssist",selector:["[data-test~=ring-query-assist]"]},{type:"click",selector:"[data-test=ring-query-assist-input]"},{type:"sendKeys",selector:"[data-test=ring-query-assist-input]",value:"test "},{type:"capture",name:"withPopup",selector:["[data-test~=ring-query-assist]","[data-test~=ring-query-assist-popup]"]}]}};const withCustomRenderer=args=>(0,jsx_runtime.jsx)(QueryAssist,{...args});withCustomRenderer.args={useCustomItemRender:!0,dataSource:({query,caret})=>({query,caret,styleRanges:[{start:0,length:1,style:"text"},{start:1,length:1,style:"field_value"},{start:2,length:1,style:"field_name"},{start:3,length:1,style:"operator"}],suggestions:[{prefix:"login:",option:"John.Abrams",description:"John Abrams",group:"Logins"},{prefix:"login:",option:"lenni",description:"Lenni Joy",group:"Names"}].map((i=>({...i,rgItemType:list.A.ListProps.Type.CUSTOM,template:(0,react.createElement)("span",null,`My name is ${i.description}, my ${i.prefix} is ${i.option}`),data:i})))})},withCustomRenderer.storyName="with custom renderer",withCustomRenderer.parameters={screenshots:{skip:!0}};const WithCustomActions=args=>{const[authReady,setAuthReady]=(0,react.useState)(!1),auth=(0,react.useMemo)((()=>new auth_auth.Ay(hub_config.A)),[]);(0,react.useEffect)((()=>{auth.init().then((()=>setAuthReady(!0)))}),[auth]);const dataSource=(0,react.useMemo)((()=>{const http=new http_http.Ay(auth,auth.getAPIPath());return props=>{const params={query:{...props,fields:"query,caret,styleRanges"+(props.omitSuggestions?"":",suggestions")}};return http.get("users/queryAssist",params)}}),[auth]);return authReady?(0,jsx_runtime.jsx)(QueryAssist,{...args,dataSource}):(0,jsx_runtime.jsx)("span",{children:"Loading..."})};WithCustomActions.args={query:"test",focus:!0,hint:"lol",hintOnSelection:"lol selected",popupClassName:"test",actions:[(0,jsx_runtime.jsx)(icon.Ay,{glyph:settings_default(),style:{color:"var(--ring-icon-color)"}},"custom-action")]},WithCustomActions.storyName="with custom actions",WithCustomActions.parameters={screenshots:{skip:!0}},WithCustomActions.tags=["skip-test"];const HugeOne=args=>{const[authReady,setAuthReady]=(0,react.useState)(!1),auth=(0,react.useMemo)((()=>new auth_auth.Ay(hub_config.A)),[]);(0,react.useEffect)((()=>{auth.init().then((()=>setAuthReady(!0)))}),[auth]);const dataSource=(0,react.useMemo)((()=>{const http=new http_http.Ay(auth,auth.getAPIPath());return props=>{const params={query:{...props,fields:"query,caret,styleRanges"+(props.omitSuggestions?"":",suggestions")}};return http.get("users/queryAssist",params)}}),[auth]);return authReady?(0,jsx_runtime.jsx)(QueryAssist,{...args,dataSource}):(0,jsx_runtime.jsx)("span",{children:"Loading..."})};HugeOne.storyName="huge one",HugeOne.parameters={screenshots:{skip:!0}},HugeOne.args={huge:!0,query:"test",focus:!0,hint:"lol",hintOnSelection:"lol selected",popupClassName:"test",className:"custom-class"},HugeOne.tags=["skip-test"];const disabledOne=args=>(0,jsx_runtime.jsx)(QueryAssist,{...args,disabled:!0,dataSource:()=>[]});disabledOne.storyName="disabled one",disabledOne.parameters={screenshots:{skip:!0}},disabledOne.args={query:""},Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"args => {\n  const [authReady, setAuthReady] = useState(false);\n  const auth = useMemo(() => new Auth(hubConfig), []);\n  useEffect(() => {\n    auth.init().then(() => setAuthReady(true));\n  }, [auth]);\n  const dataSource = useMemo(() => {\n    const http = new HTTP(auth, auth.getAPIPath());\n    return (props: QueryAssistRequestParams) => {\n      const params = {\n        query: {\n          ...props,\n          fields: `query,caret,styleRanges${props.omitSuggestions ? '' : ',suggestions'}`\n        }\n      };\n      return http.get<QueryAssistResponse>('users/queryAssist', params);\n    };\n  }, [auth]);\n  if (!authReady) {\n    return <span>Loading...</span>;\n  }\n  return <>\n      <QueryAssist {...args} dataSource={dataSource} />\n      <QueryAssist {...args} dataSource={dataSource} size={Size.S} />\n    </>;\n}",...Basic.parameters?.docs?.source}}},noAuth.parameters={...noAuth.parameters,docs:{...noAuth.parameters?.docs,source:{originalSource:"args => <QueryAssist {...args} />",...noAuth.parameters?.docs?.source}}},withCustomRenderer.parameters={...withCustomRenderer.parameters,docs:{...withCustomRenderer.parameters?.docs,source:{originalSource:"args => <QueryAssist {...args} />",...withCustomRenderer.parameters?.docs?.source}}},WithCustomActions.parameters={...WithCustomActions.parameters,docs:{...WithCustomActions.parameters?.docs,source:{originalSource:"args => {\n  const [authReady, setAuthReady] = useState(false);\n  const auth = useMemo(() => new Auth(hubConfig), []);\n  useEffect(() => {\n    auth.init().then(() => setAuthReady(true));\n  }, [auth]);\n  const dataSource = useMemo(() => {\n    const http = new HTTP(auth, auth.getAPIPath());\n    return (props: QueryAssistRequestParams) => {\n      const params = {\n        query: {\n          ...props,\n          fields: `query,caret,styleRanges${props.omitSuggestions ? '' : ',suggestions'}`\n        }\n      };\n      return http.get<QueryAssistResponse>('users/queryAssist', params);\n    };\n  }, [auth]);\n  if (!authReady) {\n    return <span>Loading...</span>;\n  }\n  return <QueryAssist {...args} dataSource={dataSource} />;\n}",...WithCustomActions.parameters?.docs?.source}}},HugeOne.parameters={...HugeOne.parameters,docs:{...HugeOne.parameters?.docs,source:{originalSource:"args => {\n  const [authReady, setAuthReady] = useState(false);\n  const auth = useMemo(() => new Auth(hubConfig), []);\n  useEffect(() => {\n    auth.init().then(() => setAuthReady(true));\n  }, [auth]);\n  const dataSource = useMemo(() => {\n    const http = new HTTP(auth, auth.getAPIPath());\n    return (props: QueryAssistRequestParams) => {\n      const params = {\n        query: {\n          ...props,\n          fields: `query,caret,styleRanges${props.omitSuggestions ? '' : ',suggestions'}`\n        }\n      };\n      return http.get<QueryAssistResponse>('users/queryAssist', params);\n    };\n  }, [auth]);\n  if (!authReady) {\n    return <span>Loading...</span>;\n  }\n  return <QueryAssist {...args} dataSource={dataSource} />;\n}",...HugeOne.parameters?.docs?.source}}},disabledOne.parameters={...disabledOne.parameters,docs:{...disabledOne.parameters?.docs,source:{originalSource:"args => <QueryAssist {...args} disabled dataSource={() => ([] as QueryAssistResponse)} />",...disabledOne.parameters?.docs?.source}}}},"./src/caret/caret.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Caret});var _global_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/global/dom.ts");class Caret{static returnRE=/\r/g;static normalizeNewlines(value){return"string"==typeof value?value.replace(this.returnRE,""):value}target;constructor(target){this.target=target}isContentEditable(){return"true"===this.target.contentEditable}focus(){document.activeElement&&document.activeElement===this.target||this.target.focus()}getAbsolutePosition(node){let _curNode=node,curPos=0;for(;null!=_curNode&&_curNode!==this.target;){for(;_curNode.previousSibling;){var _curNode$previousSibl;curPos+=null!==(_curNode$previousSibl=_curNode.previousSibling.textContent?.length)&&void 0!==_curNode$previousSibl?_curNode$previousSibl:0,_curNode=_curNode.previousSibling}_curNode=_curNode.parentNode}return curPos}getPosition(params={}){if(this.isContentEditable()){params.avoidFocus||this.focus();const selection=window.getSelection();if(!selection?.rangeCount)return 0;const range1=selection.getRangeAt(0),range2=range1.cloneRange();range2.selectNodeContents(this.target),range2.setEnd(range1.endContainer,range1.endOffset);const _curNode=range1.startContainer;if(this.target===_curNode)return 0===range1.startOffset||null==_curNode.textContent?0:_curNode.textContent.length;if(!this.target.contains(_curNode))return-1;if(!_curNode)return"selectionStart"in this.target&&this.target.selectionStart||-1;const curPos=this.getAbsolutePosition(_curNode);if(range1.startContainer===range1.endContainer)return range1.startOffset===range1.endOffset?curPos+range1.startOffset:{startOffset:curPos+range1.startOffset,endOffset:curPos+range1.endOffset,position:range2.toString().length};return{startOffset:curPos+range1.startOffset,endOffset:this.getAbsolutePosition(range1.endContainer)+range1.endOffset,position:range2.toString().length}}return"selectionStart"in this.target&&this.target.selectionStart||-1}getRelativePosition(curNode,position){let curPos=0,_curNode=curNode;if(!_curNode)return{_curNode:this.target,_correctedPosition:position};if(0===position){for(;3!==_curNode.nodeType;)_curNode=_curNode.childNodes[0];return{_curNode,_correctedPosition:position}}let i=-1;if(_curNode&&void 0!==_curNode.nodeType)for(;curPos<position&&3!==_curNode.nodeType&&(i++,null!=_curNode.childNodes[i]);){var _curNode$childNodes$i,_curNode$textContent$;curPos+=null!==(_curNode$childNodes$i=_curNode.childNodes[i].textContent?.length)&&void 0!==_curNode$childNodes$i?_curNode$childNodes$i:0,curPos>=position&&(_curNode=_curNode.childNodes[i],curPos-=null!==(_curNode$textContent$=_curNode.textContent?.length)&&void 0!==_curNode$textContent$?_curNode$textContent$:0,i=-1)}return{_curNode,_correctedPosition:position-curPos}}setPosition(position){const isContentEditable=this.isContentEditable();let correctedPosition,curNode=this.target&&this.target.childNodes[0];if(void 0!==position)if("object"==typeof position){const range=new Range,start=this.getRelativePosition(curNode,position.startOffset);range.setStart(start._curNode,start._correctedPosition);const end=this.getRelativePosition(curNode,position.endOffset);range.setEnd(end._curNode,end._correctedPosition),correctedPosition=range}else if(-1===position){var _value$length;const value=isContentEditable?this.target.textContent:Caret.normalizeNewlines("value"in this.target?this.target.value:void 0);correctedPosition=null!==(_value$length=value?.length)&&void 0!==_value$length?_value$length:0}else{const{_curNode,_correctedPosition}=this.getRelativePosition(curNode,position);curNode=_curNode,correctedPosition=_correctedPosition}if(isContentEditable){this.focus();try{correctedPosition instanceof Range?(window.getSelection()?.removeAllRanges(),window.getSelection()?.addRange(correctedPosition)):window.getSelection()?.collapse(curNode||this.target,correctedPosition)}catch(e){}}else"setSelectionRange"in this.target&&"number"==typeof correctedPosition&&this.target.setSelectionRange(correctedPosition,correctedPosition);return correctedPosition}getOffset(){let range,offset=0;try{range=window.getSelection()?.getRangeAt(0).cloneRange(),range?.setStart(range.startContainer,range.startOffset-1)}catch(e){return offset}return range&&0!==range.endOffset&&""!==range.toString()&&(offset=(0,_global_dom__WEBPACK_IMPORTED_MODULE_0__.l)(range).right-(0,_global_dom__WEBPACK_IMPORTED_MODULE_0__.l)(this.target).left-(range.startContainer instanceof HTMLElement&&range.startContainer.offsetLeft||0)),offset}}},"./src/contenteditable/contenteditable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_dom_server__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-dom/server.browser.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function noop(){}class ContentEditableBase extends react__WEBPACK_IMPORTED_MODULE_0__.Component{static defaultProps={disabled:!1,tabIndex:0,onInput:noop,onComponentUpdate:noop};shouldComponentUpdate(nextProps){return nextProps.disabled!==this.props.disabled||nextProps.__html!==this.props.__html}componentDidUpdate(prevProps){this.props.onComponentUpdate(prevProps)}render(){const{__html,onComponentUpdate,disabled,tabIndex,inputRef,...props}=this.props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{...props,ref:inputRef,disabled,role:"textbox",tabIndex:disabled?void 0:tabIndex,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html}})}}const ContentEditable=({children,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ContentEditableBase,{...props,__html:(0,react_dom_server__WEBPACK_IMPORTED_MODULE_1__.qV)(children)}),__WEBPACK_DEFAULT_EXPORT__=ContentEditable;ContentEditable.__docgenInfo={description:"",methods:[],displayName:"ContentEditable"}},"./src/global/rerender-hoc.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>rerenderHOC});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_composeRefs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/global/composeRefs.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function rerenderHOC(ComposedComponent){class Rerenderer extends react__WEBPACK_IMPORTED_MODULE_0__.Component{state=this.props.props;composedRef=(0,_composeRefs__WEBPACK_IMPORTED_MODULE_2__.C)();render(){const ref=this.composedRef(this.props.forwardedRef);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ComposedComponent,{...this.state,ref:instance=>ref(null!=instance?{...instance,rerender:this.setState.bind(this)}:null)})}}return(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function RerendererForwardRef(props,ref){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Rerenderer,{props,forwardedRef:ref})}))}},"./src/popup-menu/popup-menu.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>PopupMenu,D:()=>ListProps});var _popup_popup__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/popup/popup.tsx"),_list_list__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/list/list.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");class PopupMenu extends _popup_popup__WEBPACK_IMPORTED_MODULE_1__.Ay{static isItemType=_list_list__WEBPACK_IMPORTED_MODULE_2__.A.isItemType;static ListProps=_list_list__WEBPACK_IMPORTED_MODULE_2__.A.ListProps;static defaultProps={..._list_list__WEBPACK_IMPORTED_MODULE_2__.A.defaultProps,..._popup_popup__WEBPACK_IMPORTED_MODULE_1__.Ay.defaultProps,renderOptimization:!1,closeOnSelect:!1};onSelect=(item,event)=>{this.props.closeOnSelect&&this._onCloseAttempt(event),this.props.onSelect(item,event)};list;listRef=el=>{this.list=el};getInternalContent(){const{className,...props}=this.props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_list_list__WEBPACK_IMPORTED_MODULE_2__.A,{ref:this.listRef,...props,maxHeight:this.popup&&parseFloat(this.popup.style.maxHeight),shortcuts:this.shouldUseShortcuts(),onSelect:this.onSelect})})}}const{ListProps}=_list_list__WEBPACK_IMPORTED_MODULE_2__.A},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./src/query-assist/query-assist.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__),_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_global_global_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./src/global/global.css"),_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_global_variables_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./src/global/variables.css"),_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_button_button_css__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./src/button/button.css"),___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_global_variables_css__WEBPACK_IMPORTED_MODULE_3__.default),___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_button_button_css__WEBPACK_IMPORTED_MODULE_4__.default),___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_global_global_css__WEBPACK_IMPORTED_MODULE_2__.default,"",!0),___CSS_LOADER_EXPORT___.push([module.id,'.queryAssist_a15c {\n  --ring-input-icon-offset: calc(var(--ring-unit)*2.5);\n  --ring-input-padding-inline: var(--ring-unit);\n  --ring-input-padding-block: 1px;\n\n  position: relative;\n\n  display: flex;\n  align-items: center;\n\n  box-sizing: border-box;\n  min-height: calc(var(--ring-input-padding-inline)*3);\n  padding: var(--ring-input-padding-block) var(--ring-input-padding-inline);\n\n  transition: border-color var(--ring-ease);\n\n  border: 1px solid var(--ring-borders-color);\n  border-radius: var(--ring-border-radius);\n\n  font-size: var(--ring-font-size);\n  line-height: var(--ring-line-height);\n}\n\n.queryAssist_a15c * {\n    box-sizing: border-box;\n  }\n\n@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.queryAssist_a15c:hover {\n    transition: none;\n\n    border-color: var(--ring-border-hover-color);\n  }}\n\n.queryAssist_a15c:focus-within {\n    transition: none;\n\n    border-color: var(--ring-main-color);\n  }\n\n/*\n    Kill yellow/blue webkit autocomplete\n    https://css-tricks.com/snippets/css/change-autocomplete-styles-webkit-browsers/\n  */\n\n@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.queryAssist_a15c:-webkit-autofill:hover {\n      -webkit-transition: background-color 50000s ease-in-out 0s;\n      transition: background-color 50000s ease-in-out 0s;\n    }}\n\n.queryAssist_a15c:-webkit-autofill,.queryAssist_a15c:-webkit-autofill:focus {\n      -webkit-transition: background-color 50000s ease-in-out 0s;\n      transition: background-color 50000s ease-in-out 0s;\n    }\n\n.error_dd73 .queryAssist_a15c {\n    border-color: var(--ring-icon-error-color);\n  }\n\n.queryAssistDisabled_b96a {\n  color: var(--ring-disabled-color);\n  border-color: var(--ring-border-disabled-color);\n  background-color: var(--ring-disabled-background-color);\n\n  -webkit-text-fill-color: var(--ring-disabled-color); /* Required for Safari, see RG-2063 for details */\n}\n\n.huge_c606 {\n  max-height: calc(var(--ring-input-padding-inline)*4);\n\n  padding: 0 0 0 var(--ring-input-padding-inline);\n}\n\n.huge_c606 .actions_f70f {\n    padding-right: var(--ring-input-padding-inline);\n  }\n\n[dir="rtl"] .huge_c606 {\n    padding: 0 var(--ring-input-padding-inline) 0 0;\n  }\n\n:is([dir="rtl"] .huge_c606) .actions_f70f {\n      padding: 0 var(--ring-input-padding-inline);\n    }\n\n.input_c2ff {\n  overflow: hidden;\n\n  flex-grow: 1;\n\n  margin: 0;\n\n  cursor: text;\n\n  transition: border-color var(--ring-ease);\n  white-space: nowrap;\n\n  color: var(--ring-text-color);\n  outline: none;\n  background: transparent;\n\n  font: inherit;\n  scrollbar-width: none;\n\n  caret-color: var(--ring-main-color);\n}\n\n.letter-text_b1f2 {\n  color: var(--ring-warning-color);\n}\n\n.letterDefault_c51b,\n.letter-field-name_b456 {\n  color: var(--ring-text-color);\n}\n\n.letter-field-value_d67f {\n  color: var(--ring-link-color);\n}\n\n.letter-operator_ce4e {\n  color: var(--ring-secondary-color);\n}\n\n.letter-error_e900 {\n  padding-bottom: 1px;\n\n  border-bottom: 1px solid var(--ring-icon-error-color);\n}\n\n.highlight_da69 {\n  font-weight: var(--ring-font-weight-bold);\n}\n\n.service_ad25 {\n  color: var(--ring-secondary-color);\n}\n\n.placeholder_b973 {\n\n  position: absolute;\n\n  display: block;\n  overflow: hidden;\n\n  width: calc(100% - var(--ring-input-padding-inline)*4);\n  padding-left: calc(var(--ring-input-padding-inline)*3 - var(--ring-input-padding-block));\n\n  white-space: nowrap;\n\n  text-overflow: ellipsis;\n\n  pointer-events: none;\n\n  color: var(--ring-disabled-color);\n}\n\n[dir="rtl"] .placeholder_b973 {\n    padding-right: calc(var(--ring-input-padding-inline)*3 + var(--ring-input-padding-block)*2);\n\n    text-align: right;\n  }\n\n.hugePlaceholder_c504 {\n  padding-left: 0;\n}\n\n.letter_a819 {\n  display: inline;\n}\n\n.actions_f70f {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 100%;\n  max-height: calc(var(--ring-input-padding-inline)*2);\n  padding-left: var(--ring-input-padding-inline);\n\n  line-height: inherit;\n}\n\n[dir="rtl"] .actions_f70f {\n    padding: 0 var(--ring-input-padding-inline) 0 0;\n  }\n\n.icon_c97f {\n  padding-right: var(--ring-input-padding-inline);\n\n  color: var(--ring-icon-secondary-color);\n}\n\n[dir="rtl"] .icon_c97f {\n    padding: 0 0 0 var(--ring-input-padding-inline);\n  }\n\n.rightSearchButton_e78c {\n  padding: 5px 9px;\n\n  cursor: pointer;\n\n  transition: border-color var(--ring-ease);\n\n  color: var(--ring-icon-secondary-color);\n\n  border: 1px solid var(--ring-borders-color);\n  border-right: 0;\n  border-radius: var(--ring-border-radius);\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n\n  /* stylelint-disable-next-line selector-max-specificity */\n}\n\n.queryAssist_a15c.queryAssist_a15c:focus-within .rightSearchButton_e78c {\n    transition: none;\n\n    border-color: var(--ring-main-color);\n  }\n\n@media (hover: hover), (-moz-touch-enabled: 0), (-ms-high-contrast: none), (-ms-high-contrast: active) {.queryAssist_a15c:hover .rightSearchButton_e78c {\n    transition: none;\n\n    border-color: var(--ring-border-hover-color);\n  }}\n\n[dir="rtl"] .rightSearchButton_e78c {\n    border-right: 1px solid var(--ring-borders-color);\n    border-left: 0;\n    border-radius: var(--ring-border-radius);\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n.clear_b7ff {\n  top: 1px;\n\n  padding-right: 0;\n}\n\n[dir="rtl"] .clear_b7ff {\n    padding-right: var(--ring-input-padding-inline);\n    padding-left: 0;\n  }\n\n.input_c2ff::-webkit-scrollbar {\n  display: none;\n}\n\n.withoutGlass_fddc {\n  padding-left: 0;\n}\n\n[dir="rtl"] .withoutGlass_fddc {\n    padding-right: calc(var(--ring-input-padding-block)*3);\n  }\n\n.loaderActive_e7e2 {\n  padding-right: calc(var(--ring-input-padding-inline) - var(--ring-input-padding-block));\n}\n\n.loaderOnTheRight_ec90 {\n  padding-right: 0;\n}\n\n[dir="rtl"] .loaderOnTheRight_ec90 {\n    padding-left: 0;\n  }\n\n.inputRevertOrder_c89f {\n  order: -1;\n}\n',"",{version:3,sources:["webpack://./src/query-assist/query-assist.css","<no source>"],names:[],mappings:"AAMA;EACE,oDAAsD;EACtD,6CAA6C;EAC7C,+BAA+B;;EAE/B,kBAAkB;;EAElB,aAAa;EACb,mBAAmB;;EAEnB,sBAAsB;EACtB,oDAAsD;EACtD,yEAAyE;;EAEzE,yCAAyC;;EAEzC,2CAA2C;EAC3C,wCAAwC;;EAExC,gCAAgC;EAChC,oCAAoC;AAiCtC;;AA/BE;IACE,sBAAsB;EACxB;;AC9BF,wGAAA;IAAA,iBAAA;;IAAA,6CAAA;GAAA,CAAA;;ADsCE;IACE,gBAAgB;;IAEhB,oCAAoC;EACtC;;AAEA;;;GAGC;;AC/CH,wGAAA;MAAA,2DAAA;MAAA,mDAAA;KAAA,CAAA;;ADiDI;MAGE,0DAAkD;MAAlD,kDAAkD;IACpD;;AAGF;IACE,0CAA0C;EAC5C;;AAGF;EACE,iCAAiC;EACjC,+CAA+C;EAC/C,uDAAuD;;EAEvD,mDAAmD,EAAE,iDAAiD;AACxG;;AAEA;EACE,oDAAsD;;EAEtD,+CAA+C;AAajD;;AAXE;IACE,+CAA+C;EACjD;;AAEA;IACE,+CAA+C;EAKjD;;AAHE;MACE,2CAA2C;IAC7C;;AAIJ;EACE,gBAAgB;;EAEhB,YAAY;;EAEZ,SAAS;;EAET,YAAY;;EAEZ,yCAAyC;EACzC,mBAAmB;;EAEnB,6BAA6B;EAC7B,aAAa;EACb,uBAAuB;;EAEvB,aAAa;EACb,qBAAqB;;EAErB,mCAAmC;AACrC;;AAEA;EACE,gCAAgC;AAClC;;AAEA;;EAEE,6BAA6B;AAC/B;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,kCAAkC;AACpC;;AAEA;EACE,mBAAmB;;EAEnB,qDAAqD;AACvD;;AAEA;EACE,yCAAyC;AAC3C;;AAEA;EACE,kCAAkC;AACpC;;AAEA;;EAGE,kBAAkB;;EAElB,cAAc;EACd,gBAAgB;;EAEhB,sDAAwD;EACxD,wFAA0F;;EAE1F,mBAAmB;;EAEnB,uBAAuB;;EAEvB,oBAAoB;;EAEpB,iCAAiC;AAOnC;;AALE;IACE,2FAA+F;;IAE/F,iBAAiB;EACnB;;AAGF;EACE,eAAe;AACjB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,oBAAoB;EACpB,mBAAmB;EACnB,uBAAuB;;EAEvB,YAAY;EACZ,oDAAsD;EACtD,8CAA8C;;EAE9C,oBAAoB;AAKtB;;AAHE;IACE,+CAA+C;EACjD;;AAGF;EACE,+CAA+C;;EAE/C,uCAAuC;AAKzC;;AAHE;IACE,+CAA+C;EACjD;;AAGF;EACE,gBAAgB;;EAEhB,eAAe;;EAEf,yCAAyC;;EAEzC,uCAAuC;;EAEvC,2CAA2C;EAC3C,eAAe;EACf,wCAAwC;EACxC,yBAAyB;EACzB,4BAA4B;;EAE5B,yDAAyD;AAoB3D;;AAnBE;IACE,gBAAgB;;IAEhB,oCAAoC;EACtC;;AC5NF,wGAAA;IAAA,iBAAA;;IAAA,6CAAA;GAAA,CAAA;;ADoOE;IACE,iDAAiD;IACjD,cAAc;IACd,wCAAwC;IACxC,0BAA0B;IAC1B,6BAA6B;EAC/B;;AAGF;EACE,QAAQ;;EAER,gBAAgB;AAMlB;;AAJE;IACE,+CAA+C;IAC/C,eAAe;EACjB;;AAGF;EACE,aAAa;AACf;;AAEA;EACE,eAAe;AAKjB;;AAHE;IACE,sDAAwD;EAC1D;;AAGF;EACE,uFAAuF;AACzF;;AAEA;EACE,gBAAgB;AAKlB;;AAHE;IACE,eAAe;EACjB;;AAGF;EACE,SAAS;AACX",sourcesContent:['@import "../global/variables.css";\n@import "../button/button.css";\n\n@value overInputZIndex: 2;\n@value inputGap: calc(var(--ring-unit) * 3);\n\n.queryAssist {\n  --ring-input-icon-offset: calc(var(--ring-unit) * 2.5);\n  --ring-input-padding-inline: var(--ring-unit);\n  --ring-input-padding-block: 1px;\n\n  position: relative;\n\n  display: flex;\n  align-items: center;\n\n  box-sizing: border-box;\n  min-height: calc(var(--ring-input-padding-inline) * 3);\n  padding: var(--ring-input-padding-block) var(--ring-input-padding-inline);\n\n  transition: border-color var(--ring-ease);\n\n  border: 1px solid var(--ring-borders-color);\n  border-radius: var(--ring-border-radius);\n\n  font-size: var(--ring-font-size);\n  line-height: var(--ring-line-height);\n\n  & * {\n    box-sizing: border-box;\n  }\n\n  &:hover {\n    transition: none;\n\n    border-color: var(--ring-border-hover-color);\n  }\n\n  &:focus-within {\n    transition: none;\n\n    border-color: var(--ring-main-color);\n  }\n\n  /*\n    Kill yellow/blue webkit autocomplete\n    https://css-tricks.com/snippets/css/change-autocomplete-styles-webkit-browsers/\n  */\n  &:-webkit-autofill {\n    &,\n    &:hover,\n    &:focus {\n      transition: background-color 50000s ease-in-out 0s;\n    }\n  }\n\n  .error & {\n    border-color: var(--ring-icon-error-color);\n  }\n}\n\n.queryAssistDisabled {\n  color: var(--ring-disabled-color);\n  border-color: var(--ring-border-disabled-color);\n  background-color: var(--ring-disabled-background-color);\n\n  -webkit-text-fill-color: var(--ring-disabled-color); /* Required for Safari, see RG-2063 for details */\n}\n\n.huge {\n  max-height: calc(var(--ring-input-padding-inline) * 4);\n\n  padding: 0 0 0 var(--ring-input-padding-inline);\n\n  & .actions {\n    padding-right: var(--ring-input-padding-inline);\n  }\n\n  [dir="rtl"] & {\n    padding: 0 var(--ring-input-padding-inline) 0 0;\n\n    & .actions {\n      padding: 0 var(--ring-input-padding-inline);\n    }\n  }\n}\n\n.input {\n  overflow: hidden;\n\n  flex-grow: 1;\n\n  margin: 0;\n\n  cursor: text;\n\n  transition: border-color var(--ring-ease);\n  white-space: nowrap;\n\n  color: var(--ring-text-color);\n  outline: none;\n  background: transparent;\n\n  font: inherit;\n  scrollbar-width: none;\n\n  caret-color: var(--ring-main-color);\n}\n\n.letter-text {\n  color: var(--ring-warning-color);\n}\n\n.letterDefault,\n.letter-field-name {\n  color: var(--ring-text-color);\n}\n\n.letter-field-value {\n  color: var(--ring-link-color);\n}\n\n.letter-operator {\n  color: var(--ring-secondary-color);\n}\n\n.letter-error {\n  padding-bottom: 1px;\n\n  border-bottom: 1px solid var(--ring-icon-error-color);\n}\n\n.highlight {\n  font-weight: var(--ring-font-weight-bold);\n}\n\n.service {\n  color: var(--ring-secondary-color);\n}\n\n.placeholder {\n  composes: resetButton from "../global/global.css";\n\n  position: absolute;\n\n  display: block;\n  overflow: hidden;\n\n  width: calc(100% - var(--ring-input-padding-inline) * 4);\n  padding-left: calc(var(--ring-input-padding-inline) * 3 - var(--ring-input-padding-block));\n\n  white-space: nowrap;\n\n  text-overflow: ellipsis;\n\n  pointer-events: none;\n\n  color: var(--ring-disabled-color);\n\n  [dir="rtl"] & {\n    padding-right: calc(var(--ring-input-padding-inline) * 3 + var(--ring-input-padding-block) * 2);\n\n    text-align: right;\n  }\n}\n\n.hugePlaceholder {\n  padding-left: 0;\n}\n\n.letter {\n  display: inline;\n}\n\n.actions {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 100%;\n  max-height: calc(var(--ring-input-padding-inline) * 2);\n  padding-left: var(--ring-input-padding-inline);\n\n  line-height: inherit;\n\n  [dir="rtl"] & {\n    padding: 0 var(--ring-input-padding-inline) 0 0;\n  }\n}\n\n.icon {\n  padding-right: var(--ring-input-padding-inline);\n\n  color: var(--ring-icon-secondary-color);\n\n  [dir="rtl"] & {\n    padding: 0 0 0 var(--ring-input-padding-inline);\n  }\n}\n\n.rightSearchButton {\n  padding: 5px 9px;\n\n  cursor: pointer;\n\n  transition: border-color var(--ring-ease);\n\n  color: var(--ring-icon-secondary-color);\n\n  border: 1px solid var(--ring-borders-color);\n  border-right: 0;\n  border-radius: var(--ring-border-radius);\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n\n  /* stylelint-disable-next-line selector-max-specificity */\n  .queryAssist.queryAssist:focus-within & {\n    transition: none;\n\n    border-color: var(--ring-main-color);\n  }\n\n  .queryAssist:hover & {\n    transition: none;\n\n    border-color: var(--ring-border-hover-color);\n  }\n\n  [dir="rtl"] & {\n    border-right: 1px solid var(--ring-borders-color);\n    border-left: 0;\n    border-radius: var(--ring-border-radius);\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n}\n\n.clear {\n  top: 1px;\n\n  padding-right: 0;\n\n  [dir="rtl"] & {\n    padding-right: var(--ring-input-padding-inline);\n    padding-left: 0;\n  }\n}\n\n.input::-webkit-scrollbar {\n  display: none;\n}\n\n.withoutGlass {\n  padding-left: 0;\n\n  [dir="rtl"] & {\n    padding-right: calc(var(--ring-input-padding-block) * 3);\n  }\n}\n\n.loaderActive {\n  padding-right: calc(var(--ring-input-padding-inline) - var(--ring-input-padding-block));\n}\n\n.loaderOnTheRight {\n  padding-right: 0;\n\n  [dir="rtl"] & {\n    padding-left: 0;\n  }\n}\n\n.inputRevertOrder {\n  order: -1;\n}\n',null],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={overInputZIndex:"2",inputGap:"calc(var(--ring-unit)*3)",queryAssist:"queryAssist_a15c",error:"error_dd73",queryAssistDisabled:"queryAssistDisabled_b96a",huge:"huge_c606",actions:"actions_f70f",input:"input_c2ff","letter-text":"letter-text_b1f2",letterDefault:"letterDefault_c51b","letter-field-name":"letter-field-name_b456","letter-field-value":"letter-field-value_d67f","letter-operator":"letter-operator_ce4e","letter-error":"letter-error_e900",highlight:"highlight_da69",service:"service_ad25",placeholder:`placeholder_b973 ${_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_global_global_css__WEBPACK_IMPORTED_MODULE_2__.default.locals.resetButton}`,hugePlaceholder:"hugePlaceholder_c504",letter:"letter_a819",icon:"icon_c97f",rightSearchButton:"rightSearchButton_e78c",clear:"clear_b7ff",withoutGlass:"withoutGlass_fddc",loaderActive:"loaderActive_e7e2",loaderOnTheRight:"loaderOnTheRight_ec90",inputRevertOrder:"inputRevertOrder_c89f"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/query-assist/query-assist.css":(module,__unused_webpack_exports,__webpack_require__)=>{var API=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),domAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),insertFn=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),setAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),styleTagTransformFn=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./src/query-assist/query-assist.css");content=content.__esModule?content.default:content;var options={};options.styleTagTransform=styleTagTransformFn,options.setAttributes=setAttributes,options.insert=insertFn.bind(null,"head"),options.domAPI=domAPI,options.insertStyleElement=insertStyleElement;API(content,options);module.exports=content&&content.locals||{}},"?4f7e":()=>{}}]);